openapi: 3.0.2
servers:
  - url: /v1
info:
  version: 1.0.0
  title: Percona Everest schema
tags:
  - name: k8s
    description: Everything related to the Kubernetes Clusters
  - name: databaseCluster
    description: Everything related to the Database Clusters
  - name: databaseEngine
    description: Everything related to the Database Engines
  - name: databaseClusterRestore
    description: Everything related to the Database Cluster Restores
  - name: backupStorage
    description: Everything related to the Backup storage

paths:
  '/kubernetes':
    post:
      tags:
        - k8s
      summary: Register kubernetes cluster in Everest
      description: Register kubernetes cluster in Everest
      operationId: registerKubernetesCluster
      responses:
        '201':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KubernetesCluster'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        description: The kubernetes cluster object to be created
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateKubernetesClusterParams'
    get:
      tags:
        - k8s
      summary: List of the registered kubernetes clusters
      description: List of the registered kubernetes clusters
      operationId: listKubernetesClusters
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KubernetesClusterList'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/kubernetes/{kubernetes-id}':
    get:
      tags:
        - k8s
      summary: Get the specified kubernetes cluster
      description: Get the specified kubernetes cluster
      operationId: getKubernetesCluster
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KubernetesCluster'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/kubernetes/{kubernetes-id}/database-clusters':
    post:
      tags:
        - databaseCluster
      summary: Create a database cluster on the specified kubernetes cluster
      description: Create a database cluster on the specified kubernetes cluster
      operationId: createDatabaseCluster
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseCluster'
        '201':
          description: Created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseCluster'
        '202':
          description: Accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseCluster'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        description: The database cluster object to be created
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatabaseCluster'
    get:
      tags:
        - databaseCluster
      summary: List of the created database clusters on the specified kubernetes cluster
      description: List of the created database clusters on the specified kubernetes cluster
      operationId: listDatabaseClusters
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseClusterList'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/kubernetes/{kubernetes-id}/database-clusters/{name}':
    get:
      tags:
        - databaseCluster
      summary: Get the specified database cluster on the specified kubernetes cluster
      description: Get the specified database cluster on the specified kubernetes cluster
      operationId: getDatabaseCluster
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
        - name: name
          in: path
          description: Name of the database cluster. Can be found under Metadata["name"] of the DatabaseCluster object.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseCluster'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - databaseCluster
      summary: Replace the specified database cluster on the specified kubernetes cluster
      description: Replace the specified database cluster on the specified kubernetes cluster
      operationId: updateDatabaseCluster
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
        - name: name
          in: path
          description: Name of the database cluster. Can be found under Metadata["name"] of the DatabaseCluster object.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseCluster'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        description: The database cluster object to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatabaseCluster'
    delete:
      tags:
        - databaseCluster
      summary: Delete the specified database cluster on the specified kubernetes cluster
      description: Delete the specified database cluster on the specified kubernetes cluster
      operationId: deleteDatabaseCluster
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
        - name: name
          in: path
          description: Name of the database cluster. Can be found under Metadata["name"] of the DatabaseCluster object.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/io.k8s.apimachinery.pkg.apis.meta.v1.Status_v2'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/kubernetes/{kubernetes-id}/database-engines':
    get:
      tags:
        - databaseEngine
      summary: List of the available database engines on the specified kubernetes cluster
      description: List of available database engines on the specified kubernetes cluster
      operationId: listDatabaseEngines
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseEngineList'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/kubernetes/{kubernetes-id}/database-engines/{name}':
    get:
      tags:
        - databaseEngine
      summary: Get the specified database engine on the specified kubernetes cluster
      description: Get the specified database engine on the specified kubernetes cluster
      operationId: getDatabaseEngine
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
        - name: name
          in: path
          description: Name of the database engine
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseEngine'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - databaseEngine
      summary: Update the specified database engine on the specified kubernetes cluster
      description: Update the specified database engine on the specified kubernetes cluster
      operationId: updateDatabaseEngine
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
        - name: name
          in: path
          description: Name of the database engine
          required: true
          schema:
            type: string
      requestBody:
        description: The database cluster object to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatabaseEngine'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseEngine'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/kubernetes/{kubernetes-id}/database-cluster-restores':
    post:
      tags:
        - databaseClusterRestore
      summary: Create a database cluster restore on the specified kubernetes cluster
      description: Create a database cluster restore on the specified kubernetes cluster
      operationId: createDatabaseClusterRestore
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseClusterRestore'
        '201':
          description: Created success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseClusterRestore'
        '202':
          description: Accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseClusterRestore'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        description: The database cluster restore object to be created
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatabaseClusterRestore'
    get:
      tags:
        - databaseClusterRestore
      summary: List of the created database cluster restores on the specified kubernetes cluster
      description: List of the created database cluster restores on the specified kubernetes cluster
      operationId: listDatabaseClusterRestores
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseClusterRestoreList'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/kubernetes/{kubernetes-id}/database-cluster-restores/{name}':
    get:
      tags:
        - databaseClusterRestore
      summary: Returns the specified cluster restore on the specified kubernetes cluster
      description: Returns the specified cluster restore on the specified kubernetes cluster
      operationId: getDatabaseClusterRestore
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
        - name: name
          in: path
          description: Name of the database cluster restore. Can be found under Metadata["name"] of the DatabaseClusterRestore object.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseClusterRestore'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - databaseClusterRestore
      summary: Replace the specified cluster restore on the specified kubernetes cluster
      description: Replace the specified cluster restore on the specified kubernetes cluster
      operationId: updateDatabaseClusterRestore
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
        - name: name
          in: path
          description: Name of the database cluster restore. Can be found under Metadata["name"] of the DatabaseClusterRestore object.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseClusterRestore'
        '201':
          description: Created successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatabaseClusterRestore'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        description: The database cluster restore object to be updated
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatabaseClusterRestore'
    delete:
      tags:
        - databaseClusterRestore
      summary: Delete the specified cluster restore on the specified kubernetes cluster
      description: Delete the specified cluster restore on the specified kubernetes cluster
      operationId: deleteDatabaseClusterRestore
      parameters:
        - name: kubernetes-id
          in: path
          description: Id of the kubernetes cluster
          required: true
          schema:
            type: string
        - name: name
          in: path
          description: Name of the database cluster restore. Can be found under Metadata["name"] of the DatabaseClusterRestore object.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/io.k8s.apimachinery.pkg.apis.meta.v1.Status_v2'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/backup-storages':
    post:
      tags:
        - backupStorage
      summary: Create a new backup storage object
      description: Create a new backup storage object
      operationId: createBackupStorage
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupStorage'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        description: The backup storage object to be created
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBackupStorageParams'
    get:
      tags:
        - backupStorage
      summary: List of the created backup storages
      description: List of the created backup storages
      operationId: listBackupStorages
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupStoragesList'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  '/backup-storages/{backup-storage-id}':
    get:
      tags:
        - backupStorage
      summary: Get the specified backup storage
      description: Get the specified backup storage
      operationId: getBackupStorage
      parameters:
        - name: backup-storage-id
          in: path
          description: Id of the backup storage
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupStorage'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    patch:
      tags:
        - backupStorage
      summary: Partial update of the specified backup storage
      description: Partial update of the specified backup storage. Updates only the specified fields.
      operationId: updateBackupStorage
      parameters:
        - name: backup-storage-id
          in: path
          description: Id of the backup storage
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BackupStorage'
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      requestBody:
        description: The backup storage params. Only the specified fields will be updated.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBackupStorageParams'
    delete:
      tags:
        - backupStorage
      summary: Delete the specified backup storage
      description: Delete the specified backup storage
      operationId: deleteBackupStorage
      parameters:
        - name: backup-storage-id
          in: path
          description: Id of the backup storage
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Successful operation
        '400':
          description: Unsuccessful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

components:
  schemas:
    Error:
      type: object
      description: Error response
      properties:
        message:
          type: string
    CreateBackupStorageParams:
      type: object
      description: Backup storage parameters
      properties:
        name:
          description: A user defined string name of the storage in the DNS name format https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#dns-label-names
          type: string
          example: aws-dev
        type:
          type: string
          enum:
            - s3
            - azure
            - gcs
        bucketName:
          type: string
          description: The cloud storage bucket/container name
        accessKey:
          type: string
        secretKey:
          type: string
        url:
          type: string
        region:
          type: string
      required:
        - name
        - bucketName
        - accessKey
        - secretKey
        - region
        - type
    UpdateBackupStorageParams:
      type: object
      description: Backup storage parameters
      properties:
        name:
          type: string
          description: A user defined string name of the storage in the DNS name format https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#dns-label-names
          example: aws-dev
        bucketName:
          type: string
          description: The cloud storage bucket/container name
        accessKey:
          type: string
        secretKey:
          type: string
        url:
          type: string
        region:
          type: string
    BackupStorage:
      type: object
      description: Backup storage information
      properties:
        id:
          type: string
        type:
          type: string
          enum:
            - s3
            - azure
            - gcs
        name:
          type: string
        bucketName:
          type: string
        url:
          type: string
        region:
          type: string
      required:
        - id
        - name
        - bucketName
        - region
        - type
    BackupStoragesList:
      type: array
      items:
        type: object
        $ref: '#/components/schemas/BackupStorage'
    CreateKubernetesClusterParams:
      type: object
      description: kubernetes object
      properties:
        name:
          type: string
          example: minikube
        kubeconfig:
          type: string
        namespace:
          type: string
          default: percona-everest
      required:
        - name
        - kubeconfig
    KubernetesCluster:
      type: object
      description: kubernetes object
      properties:
        id:
          type: string
        name:
          type: string
          example: minikube
      required:
        - id
        - name
    KubernetesClusterList:
      type: array
      items:
        type: object
        $ref: '#/components/schemas/KubernetesCluster'
    DatabaseClusterList:
      description: DatabaseClusterList is an object that contains the list of the existing database clusters.
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
                  object represents. Servers may infer this from the endpoint the client
                  submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        items:
          type: array
          $ref: '#/components/schemas/DatabaseCluster'
        metadata:
          type: object
      type: object
    DatabaseEngineList:
      description: DatabaseEngineList is an object that contains the list of the existing database engines.
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
                  object represents. Servers may infer this from the endpoint the client
                  submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        items:
          type: array
          $ref: '#/components/schemas/DatabaseEngine'
        metadata:
          type: object
      type: object
    DatabaseClusterRestoreList:
      description: DatabaseClusterRestoreList is an object that contains the list of the existing database cluster restores.
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
                  object represents. Servers may infer this from the endpoint the client
                  submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        items:
          type: array
          $ref: '#/components/schemas/DatabaseClusterRestore'
        metadata:
          type: object
      type: object
    SizeLimit:
      anyOf:
        - $ref: '#/components/schemas/Integer'
        - $ref: '#/components/schemas/String'
      description: 'sizeLimit is the total amount of local storage required for this EmptyDir volume. The size limit is also applicable for memory medium. The maximum usage on memory medium EmptyDir would be the minimum value between the SizeLimit specified here and the sum of memory limits of all containers in a pod. The default is nil which means that the limit is undefined. More info: http://kubernetes.io/docs/user-guide/volumes#emptydir'
      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
      x-kubernetes-int-or-string: true
    Integer:
      type: integer
    String:
      type: string

    # -------------------------
    # DatabaseEngine spec is imported from the everest operator,
    # please do not edit the definition below manually
    # -------------------------
    DatabaseEngine:
      description: DatabaseEngine is the Schema for the databaseengines API.
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: DatabaseEngineSpec is a spec for a database engine.
          properties:
            allowedVersions:
              items:
                type: string
              type: array
            type:
              description: EngineType stands for the supported database engines.
                Right now it's only pxc and psmdb. However, it can be ps, pg and
                any other source.
              type: string
          required:
          - type
          type: object
        status:
          description: DatabaseEngineStatus defines the observed state of DatabaseEngine.
          properties:
            availableVersions:
              description: Versions struct represents available versions of database
                engine components.
              properties:
                backup:
                  additionalProperties:
                    description: Component contains information of the database
                      engine component. Database Engine component can be database
                      engine, database proxy or tools image path.
                    properties:
                      critical:
                        type: boolean
                      imageHash:
                        type: string
                      imagePath:
                        type: string
                      status:
                        type: string
                    type: object
                  type: object
                engine:
                  additionalProperties:
                    description: Component contains information of the database
                      engine component. Database Engine component can be database
                      engine, database proxy or tools image path.
                    properties:
                      critical:
                        type: boolean
                      imageHash:
                        type: string
                      imagePath:
                        type: string
                      status:
                        type: string
                    type: object
                  type: object
                proxy:
                  additionalProperties:
                    additionalProperties:
                      description: Component contains information of the database
                        engine component. Database Engine component can be database
                        engine, database proxy or tools image path.
                      properties:
                        critical:
                          type: boolean
                        imageHash:
                          type: string
                        imagePath:
                          type: string
                        status:
                          type: string
                      type: object
                    type: object
                  type: object
                tools:
                  additionalProperties:
                    additionalProperties:
                      description: Component contains information of the database
                        engine component. Database Engine component can be database
                        engine, database proxy or tools image path.
                      properties:
                        critical:
                          type: boolean
                        imageHash:
                          type: string
                        imagePath:
                          type: string
                        status:
                          type: string
                      type: object
                    type: object
                  type: object
              type: object
            operatorVersion:
              type: string
            status:
              description: EngineState represents state of engine in a k8s cluster.
              type: string
          type: object
      type: object


    # -------------------------
    # DatabaseCluster spec is imported from the everest operator,
    # please do not edit the definition below manually
    # -------------------------
    DatabaseCluster:
      description: DatabaseCluster is the Schema for the databaseclusters API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: DatabaseClusterSpec defines the desired state of DatabaseCluster
          properties:
            backup:
              description: Backup is the backup specification
              properties:
                enabled:
                  description: Enabled is a flag to enable backups
                  type: boolean
                schedules:
                  description: Schedules is a list of backup schedules
                  items:
                    properties:
                      enabled:
                        description: Enabled is a flag to enable the schedule
                        type: boolean
                      name:
                        description: Name is the name of the schedule
                        type: string
                      objectStorageName:
                        description: ObjectStorageName is the name of the ObjectStorage
                          CR that defines the storage location
                        type: string
                      retentionCopies:
                        description: RetentionCopies is the number of backup copies
                          to retain
                        format: int32
                        type: integer
                      schedule:
                        description: Schedule is the cron schedule
                        type: string
                    required:
                    - enabled
                    - name
                    - objectStorageName
                    - schedule
                    type: object
                  type: array
              required:
              - enabled
              type: object
            dataSource:
              description: DataSource defines a data source for bootstraping a new
                cluster
              properties:
                backupName:
                  description: BackupName is the name of the backup to use
                  type: string
                objectStorageName:
                  description: ObjectStorageName is the name of the ObjectStorage
                    CR that defines the storage location
                  type: string
              required:
              - backupName
              - objectStorageName
              type: object
            engine:
              description: Engine is the database engine specification
              properties:
                config:
                  description: Config is the engine configuration
                  type: string
                replicas:
                  description: Replicas is the number of engine replicas
                  format: int32
                  type: integer
                resources:
                  description: Resources is the resource requirements for the engine
                    container
                  properties:
                    cpu:
                      anyOf:
                      - type: integer
                      - type: string
                      description: CPU is the CPU resource requirements
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    memory:
                      anyOf:
                      - type: integer
                      - type: string
                      description: Memory is the memory resource requirements
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                  type: object
                storage:
                  description: Storage is the engine storage configuration
                  properties:
                    class:
                      description: Class is the storage class to use for the persistent
                        volume claim FIXME should this be a pointer?
                      type: string
                    size:
                      anyOf:
                      - type: integer
                      - type: string
                      description: Size is the size of the persistent volume claim
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                  required:
                  - size
                  type: object
                type:
                  description: Type is the engine type
                  type: string
                userSecretsName:
                  description: UserSecretsName is the name of the secret containing
                    the user secrets
                  type: string
                version:
                  description: Version is the engine version
                  type: string
              required:
              - replicas
              - storage
              - type
              type: object
            monitoring:
              description: Monitoring is the monitoring specification
              properties:
                enabled:
                  description: Enabled is a flag to enable monitoring
                  type: boolean
                monitoringConfigName:
                  description: MonitoringConfigName is the name of the MonitoringConfig
                    CR that defines the monitoring configuration
                  type: string
                resources:
                  description: Resources is the resource requirements for the monitoring
                    container
                  properties:
                    cpu:
                      anyOf:
                      - type: integer
                      - type: string
                      description: CPU is the CPU resource requirements
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    memory:
                      anyOf:
                      - type: integer
                      - type: string
                      description: Memory is the memory resource requirements
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                  type: object
              required:
              - enabled
              type: object
            paused:
              description: Paused is a flag to stop the cluster
              type: boolean
            proxy:
              description: Proxy is the proxy specification
              properties:
                config:
                  description: Config is the proxy configuration
                  type: string
                expose:
                  description: Expose is the proxy expose configuration
                  properties:
                    ipSourceRanges:
                      description: IPSourceRanges is the list of IP source ranges
                        to allow access from
                      items:
                        type: string
                      type: array
                    type:
                      default: Internal
                      description: Type is the expose type, can be Internal, External
                        or InternetFacing
                      enum:
                      - Internal
                      - External
                      - InternetFacing
                      type: string
                  type: object
                replicas:
                  description: Replicas is the number of proxy replicas FIXME Make
                    this a pointer someone might want to set it to 0
                  format: int32
                  type: integer
                resources:
                  description: Resources is the resource requirements for the proxy
                    container
                  properties:
                    cpu:
                      anyOf:
                      - type: integer
                      - type: string
                      description: CPU is the CPU resource requirements
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                    memory:
                      anyOf:
                      - type: integer
                      - type: string
                      description: Memory is the memory resource requirements
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      x-kubernetes-int-or-string: true
                  type: object
                type:
                  description: Type is the proxy type
                  type: string
              type: object
          required:
          - engine
          type: object
        status:
          description: DatabaseClusterStatus defines the observed state of DatabaseCluster
          properties:
            hostname:
              description: Hostname is the hostname where the cluster can be reached
              type: string
            message:
              description: Message is extra information about the cluster
              type: string
            port:
              description: Port is the port where the cluster can be reached
              format: int32
              type: integer
            ready:
              description: Ready is the number of ready pods
              format: int32
              type: integer
            size:
              description: Size is the total number of pods
              format: int32
              type: integer
            status:
              description: Status is the status of the cluster
              type: string
          type: object
      type: object

    # -------------------------
    # DatabaseClusterRestore spec is imported from the everest operator,
    # please do not edit the definition below manually
    # -------------------------
    DatabaseClusterRestore:
      description: DatabaseClusterRestore is the Schema for the databaseclusterrestores
        API.
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
                  of an object. Servers should convert recognized schemas to the latest
                  internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
                  object represents. Servers may infer this from the endpoint the client
                  submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: DatabaseClusterRestoreSpec defines the desired state of DatabaseClusterRestore.
          properties:
            backupName:
              type: string
            backupSource:
              description: BackupSource represents settings of a source where to
                get a backup to run restoration.
              properties:
                azure:
                  description: BackupStorageProviderSpec represents set of settings
                    to configure cloud provider.
                  properties:
                    bucket:
                      type: string
                    containerName:
                      description: A container name is a valid DNS name that conforms
                        to the Azure naming rules.
                      type: string
                    credentialsSecret:
                      type: string
                    endpointUrl:
                      type: string
                    prefix:
                      type: string
                    region:
                      type: string
                    storageClass:
                      description: STANDARD, NEARLINE, COLDLINE, ARCHIVE for GCP
                        Hot (Frequently accessed or modified data), Cool (Infrequently
                        accessed or modified data), Archive (Rarely accessed or
                        modified data) for Azure.
                      type: string
                  required:
                    - credentialsSecret
                  type: object
                destination:
                  type: string
                image:
                  type: string
                s3:
                  description: BackupStorageProviderSpec represents set of settings
                    to configure cloud provider.
                  properties:
                    bucket:
                      type: string
                    containerName:
                      description: A container name is a valid DNS name that conforms
                        to the Azure naming rules.
                      type: string
                    credentialsSecret:
                      type: string
                    endpointUrl:
                      type: string
                    prefix:
                      type: string
                    region:
                      type: string
                    storageClass:
                      description: STANDARD, NEARLINE, COLDLINE, ARCHIVE for GCP
                        Hot (Frequently accessed or modified data), Cool (Infrequently
                        accessed or modified data), Archive (Rarely accessed or
                        modified data) for Azure.
                      type: string
                  required:
                    - credentialsSecret
                  type: object
                sslInternalSecretName:
                  type: string
                sslSecretName:
                  type: string
                storage_type:
                  description: BackupStorageType represents backup storage type.
                  type: string
                storageName:
                  type: string
                vaultSecretName:
                  type: string
              required:
                - storage_type
              type: object
            databaseCluster:
              type: string
            databaseType:
              description: EngineType stands for the supported database engines.
                Right now it's only pxc and psmdb. However, it can be ps, pg and
                any other source.
              type: string
          required:
            - databaseCluster
            - databaseType
          type: object
        status:
          description: DatabaseClusterRestoreStatus defines the observed state of
            DatabaseClusterRestore.
          properties:
            completed:
              format: date-time
              type: string
            conditions:
              items:
                description: "Condition contains details for one aspect of the current
                        state of this API Resource. --- This struct is intended for direct
                        use as an array at the field path .status.conditions.  For example,
                        \n type FooStatus struct{ // Represents the observations of a
                        foo's current state. // Known .status.conditions.type are: \"Available\",
                        \"Progressing\", and \"Degraded\" // +patchMergeKey=type // +patchStrategy=merge
                        // +listType=map // +listMapKey=type Conditions []metav1.Condition
                        `json:\"conditions,omitempty\" patchStrategy:\"merge\" patchMergeKey:\"type\"
                        protobuf:\"bytes,1,rep,name=conditions\"` \n // other fields }"
                properties:
                  lastTransitionTime:
                    description: lastTransitionTime is the last time the condition
                      transitioned from one status to another. This should be when
                      the underlying condition changed.  If that is not known, then
                      using the time when the API field changed is acceptable.
                    format: date-time
                    type: string
                  message:
                    description: message is a human readable message indicating
                      details about the transition. This may be an empty string.
                    maxLength: 32768
                    type: string
                  observedGeneration:
                    description: observedGeneration represents the .metadata.generation
                      that the condition was set based upon. For instance, if .metadata.generation
                      is currently 12, but the .status.conditions[x].observedGeneration
                      is 9, the condition is out of date with respect to the current
                      state of the instance.
                    format: int64
                    minimum: 0
                    type: integer
                  reason:
                    description: reason contains a programmatic identifier indicating
                      the reason for the condition's last transition. Producers
                      of specific condition types may define expected values and
                      meanings for this field, and whether the values are considered
                      a guaranteed API. The value should be a CamelCase string.
                      This field may not be empty.
                    maxLength: 1024
                    minLength: 1
                    pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                    type: string
                  status:
                    description: status of the condition, one of True, False, Unknown.
                    enum:
                      - "True"
                      - "False"
                      - Unknown
                    type: string
                  type:
                    description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      --- Many .condition.type values are consistent across resources
                      like Available, but because arbitrary conditions can be useful
                      (see .node.status.conditions), the ability to deconflict is
                      important. The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                    maxLength: 316
                    pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                    type: string
                required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                type: object
              type: array
            destination:
              type: string
            lastscheduled:
              format: date-time
              type: string
            message:
              type: string
            state:
              description: RestoreState represents state of restoration.
              type: string
            storageName:
              type: string
          type: object
      type: object

    # -------------------------
    # io.k8s.apimachinery.pkg.apis.meta.v1.Status_v2 spec is imported from k8s API,
    # please do not edit the definition below manually
    # -------------------------
    io.k8s.apimachinery.pkg.apis.meta.v1.Status_v2:
      description: Status is a return value for calls that don't return other objects.
      type: object
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest internal
            value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        code:
          description: Suggested HTTP return code for this status, 0 if not set.
          type: integer
          format: int32
        details:
          description: Extended data associated with the reason.  Each reason may define
            its own extended details. This field is optional and the data returned is
            not guaranteed to conform to any schema except that defined by the reason
            type.
          "$ref": "#/components/schemas/io.k8s.apimachinery.pkg.apis.meta.v1.StatusDetails_v2"
        kind:
          description: 'Kind is a string value representing the REST resource this object
            represents. Servers may infer this from the endpoint the client submits requests
            to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        message:
          description: A human-readable description of the status of this operation.
          type: string
        metadata:
          description: 'Standard list metadata. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          "$ref": "#/components/schemas/io.k8s.apimachinery.pkg.apis.meta.v1.ListMeta"
        reason:
          description: A machine-readable description of why this operation is in the
            "Failure" status. If this value is empty there is no information available.
            A Reason clarifies an HTTP status code but does not override it.
          type: string
        status:
          description: 'Status of the operation. One of: "Success" or "Failure". More
            info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status'
          type: string

    # -------------------------
    # io.k8s.apimachinery.pkg.apis.meta.v1.ListMeta spec is imported from k8s API,
    # please do not edit the definition below manually
    # -------------------------
    io.k8s.apimachinery.pkg.apis.meta.v1.ListMeta:
      description: ListMeta describes metadata that synthetic resources must have, including
        lists and various status objects. A resource may have only one of {ObjectMeta,
        ListMeta}.
      type: object
      properties:
        continue:
          description: continue may be set if the user set a limit on the number of items
            returned, and indicates that the server has more data available. The value
            is opaque and may be used to issue another request to the endpoint that served
            this list to retrieve the next set of available objects. Continuing a consistent
            list may not be possible if the server configuration has changed or more than
            a few minutes have passed. The resourceVersion field returned when using this
            continue value will be identical to the value in the first response, unless
            you have received this token from an error message.
          type: string
        remainingItemCount:
          description: remainingItemCount is the number of subsequent items in the list
            which are not included in this list response. If the list request contained
            label or field selectors, then the number of remaining items is unknown and
            the field will be left unset and omitted during serialization. If the list
            is complete (either because it is not chunking or because this is the last
            chunk), then there are no more remaining items and this field will be left
            unset and omitted during serialization. Servers older than v1.15 do not set
            this field. The intended use of the remainingItemCount is *estimating* the
            size of a collection. Clients should not rely on the remainingItemCount to
            be set or to be exact.
          type: integer
          format: int64
        resourceVersion:
          description: 'String that identifies the server''s internal version of this
            object that can be used by clients to determine when objects have changed.
            Value must be treated as opaque by clients and passed unmodified back to the
            server. Populated by the system. Read-only. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency'
          type: string
        selfLink:
          description: |-
            selfLink is a URL representing this object. Populated by the system. Read-only.

            DEPRECATED Kubernetes will stop propagating this field in 1.20 release and the field is planned to be removed in 1.21 release.
          type: string

    # -------------------------
    # io.k8s.apimachinery.pkg.apis.meta.v1.StatusDetails_v2 spec is imported from k8s API,
    # please do not edit the definition below manually
    # -------------------------
    io.k8s.apimachinery.pkg.apis.meta.v1.StatusDetails_v2:
      description: StatusDetails is a set of additional properties that MAY be set by
        the server to provide additional information about a response. The Reason field
        of a Status object defines what attributes will be set. Clients must ignore fields
        that do not match the defined type of each attribute, and should assume that any
        attribute may be empty, invalid, or under defined.
      type: object
      properties:
        causes:
          description: The Causes array includes more details associated with the StatusReason
            failure. Not all StatusReasons may provide detailed causes.
          type: array
          items:
            "$ref": "#/components/schemas/io.k8s.apimachinery.pkg.apis.meta.v1.StatusCause"
        group:
          description: The group attribute of the resource associated with the status
            StatusReason.
          type: string
        kind:
          description: 'The kind attribute of the resource associated with the status
            StatusReason. On some operations may differ from the requested resource Kind.
            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        name:
          description: The name attribute of the resource associated with the status StatusReason
            (when there is a single name which can be described).
          type: string
        retryAfterSeconds:
          description: If specified, the time in seconds before the operation should be
            retried. Some errors may indicate the client must take an alternate action
            - for those errors this field may indicate how long to wait before taking
            the alternate action.
          type: integer
          format: int32
        uid:
          description: 'UID of the resource. (when there is a single resource which can
            be described). More info: http://kubernetes.io/docs/user-guide/identifiers#uids'
          type: string

    # -------------------------
    # io.k8s.apimachinery.pkg.apis.meta.v1.StatusCause spec is imported from k8s API,
    # please do not edit the definition below manually
    # -------------------------
    io.k8s.apimachinery.pkg.apis.meta.v1.StatusCause:
      description: StatusCause provides more information about an api.Status failure,
        including cases when multiple errors are encountered.
      type: object
      properties:
        field:
          description: |-
            The field of the resource that has caused this error, as named by its JSON serialization. May include dot and postfix notation for nested attributes. Arrays are zero-indexed.  Fields may appear more than once in an array of causes due to fields having multiple errors. Optional.

            Examples:
              "name" - the field "name" on the current resource
              "items[0].name" - the field "name" on the first array entry in "items"
          type: string
        message:
          description: A human-readable description of the cause of the error.  This field
            may be presented as-is to a reader.
          type: string
        reason:
          description: A machine-readable description of the cause of the error. If this
            value is empty there is no information available.
          type: string
